<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
<title>Cook Me</title>
</h:head>

<h:body>
<ui:composition template="/template/layout.xhtml">
	
	<ui:define name="header">
		<p>Date de derni√®re connexion :</p> 
		<p>Welcome :</p> 
	</ui:define>
	

	<ui:define name="activity">
	<h1>Administration</h1>
	</ui:define>

	<ui:define name ="content">
	<center>
		<p:panelGrid styleClass="grid">  
			 <p:row>
			 <p:column> 
				<h:dataTable var="recipetemp" value="#{recipeControllerBean.getAll()}" styleClass="table-style" headerClass="heading-style" rowClasses="rowA,rowB">
					<h:column>
						<f:facet name="header">Nom</f:facet>
						#{recipetemp.title}
					</h:column>
					<h:column>
						<f:facet name="header"></f:facet>
						<h:form id="form">  
							<p:commandButton value="X"  method="post" action="#{recipeControllerBean.delete(recipetemp)}"/>
							
							<p:commandButton value="modifier" update="@all" actionListener="#{recipeList.setSelectedRecipe(recipetemp)}" styleClass="ui-priority-primary" />
			             
						</h:form>
					</h:column>
				</h:dataTable>
			</p:column>
			<p:column>
				<div id="recipeDetail">
				  <h:form>
					<p:panelGrid style="margin-top:20px" styleClass="grid">   
							<p:row>
								<p:column colspan="2"><h:outputLabel for="title" value="Title" /></p:column>
								<p:column colspan="2"><h:inputText id="title" value="#{recipeList.selectedRecipe.title}" /></p:column>
							</p:row>
							<p:row>
								<p:column colspan="1"><img src="img/clock_img.png" style="width:50px" alt="Horloge"/></p:column>
								<p:column colspan="1"><h:outputLabel for="duration" value="Preparation duration" /></p:column>
								<p:column colspan="1"><img src="img/note_img.png" style="width:50px" alt="note"/></p:column>
								<p:column colspan="1"><h:outputLabel for="type" value="Cook expertise" /></p:column>
							</p:row>
							<p:row>	
								<p:column colspan="1"></p:column>
								<p:column colspan="1">
									<p:spinner id="duration" value="#{recipeList.selectedRecipe.duration}" min="0" max="500" />
									<h:outputLabel for="duration" value="min" />
								</p:column>
								<p:column colspan="1"></p:column>
								<p:column colspan="1">
									<h:outputText value="Cook expertise" />
									<p:rating value="#{recipeList.selectedRecipe.expertise}" />
								</p:column>
							</p:row>
							<p:row>
								<p:column colspan="1"><img src="img/people_img.jpg" style="width:50px" alt="Many people"/></p:column>
								<p:column colspan="1"><h:outputLabel for="nbPeople" value="For how many people" /></p:column>
								<p:column colspan="1"><img src="img/load_img.png" style="width:50px" alt="Type" /></p:column>
								<p:column colspan="1"><h:outputLabel for="type" value="Cook type" /></p:column>
							</p:row>
							<p:row>
								<p:column colspan="1"></p:column>
								<p:column colspan="1">
									<p:selectCheckboxMenu id="cookType" label="Cook type" filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
									   <f:selectItem itemLabel="Salade" itemValue="1" />
									   <f:selectItem itemLabel="Meal" itemValue="2" />
									   <f:selectItem itemLabel="Fish" itemValue="3" />
									   <f:selectItem itemLabel="Desert" itemValue="4" />
									</p:selectCheckboxMenu>
								</p:column>
								<p:column colspan="1"></p:column>
								<p:column colspan="1">
									<p:inputText id="nbPeople" value="#{recipeList.selectedRecipe.nbPeople}"  min="0" max="500" />
		  								<p:slider for="nbPeople"/>
		  							</p:column>
							</p:row>
							<p:row>	
								<p:column colspan="4"><p:inputTextarea id="description" value="#{recipeList.selectedRecipe.description}" rows="5" cols="30" autoResize="true" /></p:column>
							</p:row>
							<p:row>
								<p:column colspan="2"><p:commandButton value="Cancel" onclick="window.location.replace(window.location.href);"/></p:column>
								<p:column colspan="2"><p:commandButton value="Save"  method="post" action="#{recipeControllerBean.update(recipeList.selectedRecipe)}"/></p:column>
							</p:row>
						</p:panelGrid>
					</h:form>
				</div> 		
				</p:column>
			
		</p:row>
		<p:row>
			<h:form>
		  		<h:commandButton value="Add" action="#{pageMngBean.goToRecipeCreationPage()}"/>
			</h:form> 
		</p:row>
		</p:panelGrid>
	</center>
	
	</ui:define>
</ui:composition>

</h:body>

</html>