<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
<title>Cook Me</title>
</h:head>

<h:body>
<ui:composition template="/template/layout.xhtml">
	
	<ui:define name="header">
		<p>Date de derni√®re connexion :</p> 
		<p>Welcome :</p> 
	</ui:define>
	

	<ui:define name="activity">
	<h1>Administration</h1>
	</ui:define>

	<ui:define name ="content">
	<center>
		<p:panelGrid styleClass="grid">  
			<p:row>
				<p:column>   
					<h:dataTable var="usertemp" value="#{userControllerBean.getAll()}" styleClass="table-style" headerClass="heading-style" rowClasses="rowA,rowB">
						<h:column>
							<f:facet name="header">Name</f:facet>
							#{usertemp.lastName}
						</h:column>
						<h:column>
							<f:facet name="header">Login</f:facet>
							#{usertemp.login}
						</h:column>
						<h:column>
							<f:facet name="header">Admin</f:facet>
							**
						</h:column>
						<h:column>
							<f:facet name="header"></f:facet>
							<h:form id="form">  
								<h:commandButton value="X"  method="post" action="#{userControllerBean.delete(usertmp)}"/>
								
								<p:commandButton value="modifier" update="@all" actionListener="#{userList.setSelectedUser(usertemp)}" styleClass="ui-priority-primary" />
				             
							</h:form>
						</h:column>
					</h:dataTable>
				</p:column>
				<p:column>
		
				 
		<div id="userDetail">
			  <h:form>
				<p:panelGrid style="margin-top:20px" styleClass="grid">   
						<p:row>
							<p:column colspan="1"><h:outputLabel for="firstName" value="First Name" /></p:column>
							<p:column colspan="1"><h:inputText id="firstName" value="#{userList.selectedUser.firstName}" /></p:column>
							<p:column colspan="1">
								<h:selectManyCheckbox value="#{userList.selectedUser.typeUser}">
	   								<f:selectItem itemValue="1" itemLabel="Admin" />
   								</h:selectManyCheckbox>
   							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="1"><h:outputLabel for="lastName" value="Last Name" /></p:column>
							<p:column colspan="1"><h:inputText id="lastName" value="#{userList.selectedUser.lastName}" /></p:column>
						</p:row>
						<p:row>
							<p:column colspan="1"><h:outputLabel for="age" value="Age" /></p:column>
							<p:column colspan="1">
								<h:inputText id="age" value="#{userList.selectedUser.age}" >
									<!--  <f:validator validatorId="validators.age" /> -->
								</h:inputText>	
								<h:message for="age" showDetail="true" style="color:red"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="1"><h:outputLabel for="email" value="Email Address" /></p:column>
							<p:column colspan="1">
								<h:inputText id="email" value="#{userList.selectedUser.email}" >
									<f:validator validatorId="validators.email" /> 
								</h:inputText>
								<h:message for="email" showDetail="true" style="color:red"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="1"><h:outputLabel for="login" value="Login" /></p:column>
							<p:column colspan="1">
								<h:inputText id="login" value="#{userList.selectedUser.login}" required="true">
								 	<f:validator validatorId="validators.username" /> 
								</h:inputText>
								<h:message for="login" showDetail="true" style="color:red"/>
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="1"><h:outputLabel for="password" value="Password" /></p:column>
							<p:column colspan="1"><h:inputText id="password" value="***" /></p:column>
						</p:row>
						<p:row>
							<p:column colspan="1"><h:outputLabel for="re-password" value="Re-password" /></p:column>
							<p:column colspan="1"><h:inputText id="re-password" value="***" /></p:column>
						</p:row>
						<p:row>
							<p:column colspan="1"><p:commandButton value="Cancel" onclick="window.location.replace(window.location.href);"/></p:column>
							<p:column colspan="1"><h:commandButton value="Save"  method="post" action="#{userControllerBean.update(userList.selectedUser)}"/></p:column>
						</p:row>
				</p:panelGrid>
			</h:form>
		</div>
		</p:column>
	</p:row> 	
	<p:row>
		<p:column>
			<h:form>
			  		<h:commandButton value="Add" action="#{pageMngBean.goToEmergencyPage}"/>
			</h:form> 
		</p:column>
	</p:row>
	</p:panelGrid>	
	</center>
	</ui:define>
</ui:composition>

</h:body>

</html>